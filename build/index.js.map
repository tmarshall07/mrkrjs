{"version":3,"sources":["../../webpack/universalModuleDefinition","../../webpack/bootstrap","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","Mrkr.ts","index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_defineProperty","obj","configurable","writable","ownKeys","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_arrayLikeToArray","arr","len","arr2","Array","_toConsumableArray","isArray","iter","iterator","from","minLen","toString","slice","constructor","test","TypeError","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","isTextNode","node","nodeType","Mrkr","element","document","body","className","selectionEnabled","onSelection","highlightClass","handlePointerUp","setElement","protoProps","staticProps","event","results","highlight","querySelectorAll","addEventListener","removeEventListener","unregister","register","getHighlightedNodes","highlightedNode","replaceWith","childNodes","selection","window","getSelection","startOffset","undefined","endOffset","text","console","error","Error","getRangeAt","startContainer","endContainer","startTextNode","endTextNode","newNodes","highlightNode","textContent","textNodes","textNodesUnder","startFound","some","textNode","newStartNodes","newEndNodes","removeAllRanges","getOffsets","getText","currentIndex","newCurrentIndex","highlightedNodes","reduce","current","find","offsets","substring","highlightedText","highlightedSpanNode","createElement","classList","add","createTextNode","highlightedTextNode","appendChild","isEnabled","all","firstChild","nextSibling","concat","App"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Mrkr\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Mrkr\"] = factory();\n\telse\n\t\troot[\"Mrkr\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","// Type guard for Text nodes\nfunction isTextNode(node: Node): node is Text {\n  return (node as Text).nodeType === 3;\n}\n\ntype OffsetProps = {\n  startOffset?: number;\n  endOffset?: number;\n}\n\ntype Results = OffsetProps & {\n  text: string;\n}\n\ninterface Props {\n  element?: HTMLElement;\n  className?: string;\n  selectionEnabled?: boolean;\n  onSelection?: (e: PointerEvent, offsets: OffsetProps) => void;\n}\n\ninterface Range {\n  startContainer: ChildNode;\n  endContainer: ChildNode;\n  startOffset: number;\n  endOffset: number;\n}\n\nexport default class Mrkr {\n  element: HTMLElement;\n  highlightClass: string;\n  onSelection: (e: PointerEvent, offsets: OffsetProps) => void;\n  \n  private selectionEnabled: boolean;\n\n  constructor(props: Props = {}) {\n    const { element = document.body, className = 'highlight', selectionEnabled = false, onSelection = () => {} } = props;\n\n    this.element = element;\n    this.highlightClass = className;\n    this.selectionEnabled = selectionEnabled;\n    this.onSelection = onSelection;\n    \n    this.handlePointerUp = this.handlePointerUp.bind(this);\n\n    this.setElement(element);\n  }\n\n  private handlePointerUp(event: PointerEvent) {\n    if (this.selectionEnabled) {\n      const results = this.highlight();\n\n      this.onSelection(event, results);\n    }\n  }\n\n  private getHighlightedNodes(): HTMLElement[] {\n    if (!this.element) return [];\n\n    return Array.from(this.element.querySelectorAll(`.${this.highlightClass}`));\n  }\n\n  register() {\n    this.element.addEventListener('pointerup', this.handlePointerUp);\n  }\n\n  unregister() {\n    this.element.removeEventListener('pointerup', this.handlePointerUp);\n  }\n  \n  setElement(element: HTMLElement) {\n    this.unregister();\n    this.element = element;\n    this.register();\n  }\n\n  clear(): void {\n    if (!this.element) return;\n\n    const highlightedNodes = this.getHighlightedNodes();\n    highlightedNodes.forEach((highlightedNode) => {\n      highlightedNode.replaceWith(...Array.from(highlightedNode.childNodes));\n    });\n  }\n\n  highlight(): Results {\n    const selection = window.getSelection();\n    let results = {\n      startOffset: undefined,\n      endOffset: undefined,\n      text: '',\n    };\n\n    // If there's no selection object\n    if (!selection) return results;\n\n    // Container element must be defined\n    if (!this.element) {\n      console.error(new Error('Container element not defined for highlighter.'));\n      return results;\n    } \n    \n    const range = selection.getRangeAt(0);\n    \n    const { startContainer, endContainer, startOffset, endOffset } = range as unknown as Range;\n\n    // Ensure that results are Text nodes\n    if (isTextNode(startContainer) && isTextNode(endContainer)) {\n      const startTextNode = startContainer;\n      const endTextNode = endContainer;\n\n      // If no content's actually been selected\n      if (startTextNode === endTextNode && endOffset === startOffset) return results;\n  \n      if (startTextNode === endTextNode) {\n        // If the selection occurs inside the same text node\n        const newNodes = this.highlightNode(startTextNode.textContent, startOffset, endOffset) as ChildNode[];\n        startTextNode.replaceWith(...newNodes);\n      } else {\n        const textNodes = textNodesUnder(this.element);\n  \n        let startFound = false;\n        textNodes.some((textNode) => {\n          if (!textNode.textContent) return false;\n  \n          // Handle highlighting the starting text node\n          if (textNode === startTextNode) {\n            const newStartNodes = this.highlightNode(textNode.textContent, startOffset, textNode.textContent.length);\n            textNode.replaceWith(...newStartNodes);\n  \n            // Start collecting text nodes in between\n            startFound = true;\n            \n            return false;\n          } else if (textNode === endTextNode) {\n            // Handle highlighting the end text node\n            const newEndNodes = this.highlightNode(textNode.textContent, 0, endOffset);\n            textNode.replaceWith(...newEndNodes);\n  \n            return true; // Stop the loop\n          } else if (startFound) {\n            // Handle highlighting nodes in between start and end\n            const newEndNodes = this.highlightNode(textNode.textContent, 0, textNode.textContent.length);\n            textNode.replaceWith(...newEndNodes);\n          }\n          \n          return false;\n        });\n      }\n      selection.removeAllRanges();\n\n      const data = {\n        ...this.getOffsets(),\n        text: this.getText(),\n      }\n  \n      return data;\n    }\n\n    return results;\n  }\n\n  highlightRange(startOffset: number, endOffset: number): Results {\n    let results = {\n      text: '',\n      startOffset: undefined,\n      endOffset: undefined,\n    }\n\n    if (!this.element) {\n      console.error(new Error('Container element not defined for highlighter.'))\n      return results;\n    };\n\n    const textNodes = textNodesUnder(this.element);\n    \n    let currentIndex = 0;\n    let startFound = false;\n\n    textNodes.some((textNode) => {\n      if (!textNode.textContent) return false;\n\n      const newCurrentIndex = currentIndex + (textNode.textContent.length || 0);\n      if (startOffset >= currentIndex && startOffset < newCurrentIndex) {\n        const newNodes = this.highlightNode(textNode.textContent, startOffset - currentIndex, textNode.textContent.length);\n        textNode.replaceWith(...newNodes);\n        startFound = true;\n      } else if (endOffset >= currentIndex && endOffset < newCurrentIndex) {\n        const newNodes = this.highlightNode(textNode.textContent, 0, endOffset - currentIndex);\n        textNode.replaceWith(...newNodes);\n        return true;\n      } else if (startFound) {\n        const newNodes = this.highlightNode(textNode.textContent, 0, textNode.textContent.length);\n        textNode.replaceWith(...newNodes);\n      }\n\n      currentIndex = newCurrentIndex;\n      return false;\n    });\n\n    const text = this.getText();\n\n    return { text, startOffset, endOffset }\n  }\n\n  getOffsets() {\n    if (!this.element) return {};\n\n    const textNodes = textNodesUnder(this.element);\n    const highlightedNodes = this.getHighlightedNodes().reduce((arr: Text[], current) => [...arr,  ...textNodesUnder(current)], []);\n\n    let startOffset = 0;\n    let endOffset = 0;\n\n    let currentIndex = 0;\n    textNodes.some((textNode) => {\n      if (!textNode.textContent) return false;\n\n      if (highlightedNodes.find((node) => node === textNode)) {\n        if (!startOffset) {\n          startOffset = currentIndex;\n        }\n        \n        endOffset = currentIndex + textNode.textContent.length;\n      }\n\n      currentIndex += textNode.textContent.length;\n    });\n\n    return { startOffset, endOffset };\n  }\n\n  getText(): string {\n    const offsets = this.getOffsets();\n    if (this.element.textContent && offsets.startOffset && offsets.endOffset) {\n      return this.element.textContent.substring(offsets.startOffset, offsets.endOffset);\n    };\n    \n    return '';\n  }\n\n  highlightNode (text: string | null = '', startOffset: number, endOffset: number): ChildNode[] {\n    if (!text) return [];\n\n    const highlightedText = text.substring(startOffset, endOffset);\n  \n    if (highlightedText.length > 0) {\n      const highlightedSpanNode = document.createElement('SPAN');\n      highlightedSpanNode.classList.add(this.highlightClass);\n    \n      const startTextNode = document.createTextNode(text.substring(0, startOffset));\n      const highlightedTextNode = document.createTextNode(highlightedText);\n      const endTextNode = document.createTextNode(text.substring(endOffset));\n    \n      highlightedSpanNode.appendChild(highlightedTextNode);\n    \n      const newNodes = [];\n      if (startTextNode.textContent) newNodes.push(startTextNode);\n      newNodes.push(highlightedSpanNode);\n      if (endTextNode.textContent) newNodes.push(endTextNode);\n    \n      return newNodes;\n    }\n    \n    return [document.createTextNode(text)];\n  }\n\n  getSelectionEnabled() {\n    return this.selectionEnabled;\n  }\n\n  toggleSelection(isEnabled: boolean) {\n    this.selectionEnabled = isEnabled;\n  }\n\n  enableSelection() {\n    this.selectionEnabled = true;\n  }\n\n  disableSelection() {\n    this.selectionEnabled = false;\n  }\n}\n\n/**\n * Gets an array of text nodes under the passed node\n *\n * @param {HTMLElement} node\n * @returns {[HTMLElement]} - array of text nodes\n */\n const textNodesUnder = (node: HTMLElement): Text[] => {\n  let all: Text[] = [];\n\n  // @ts-ignore\n  for (node = node.firstChild; node; node = node.nextSibling) {\n    if (isTextNode(node)) all.push(node);\n    else all = all.concat(textNodesUnder(node));\n  }\n  return all;\n};\n","import App from './Mrkr';\nexport default App;"],"sourceRoot":""}