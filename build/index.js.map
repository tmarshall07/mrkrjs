{"version":3,"sources":["../../webpack/universalModuleDefinition","../../webpack/bootstrap","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","Mrkr.ts","index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_arrayLikeToArray","arr","len","length","arr2","Array","_toConsumableArray","isArray","iter","iterator","from","minLen","toString","slice","constructor","test","TypeError","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","configurable","writable","_defineProperty","obj","isTextNode","node","nodeType","Highlighter","element","document","body","className","enabled","highlightClass","setContainerElement","handlePointerUp","addEventListener","protoProps","staticProps","highlightSelection","querySelectorAll","getHighlightedNodes","forEach","highlightedNode","replaceWith","childNodes","selection","window","getSelection","results","console","error","Error","getRangeAt","startContainer","endContainer","startOffset","endOffset","startTextNode","endTextNode","newNodes","highlightNode","textContent","textNodes","textNodesUnder","startFound","some","textNode","newStartNodes","newEndNodes","removeAllRanges","getOffsets","currentIndex","newCurrentIndex","highlightedNodes","reduce","current","find","text","highlightedText","substring","highlightedSpanNode","createElement","classList","add","createTextNode","highlightedTextNode","appendChild","push","all","firstChild","nextSibling","concat","App"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"mrkrjs\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"mrkrjs\"] = factory();\n\telse\n\t\troot[\"mrkrjs\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","// Type guard for Text nodes\nfunction isTextNode(node: Node): node is Text {\n  return (node as Text).nodeType === 3;\n}\n\ninterface Props {\n  element?: HTMLElement;\n  className?: string;\n  enabled?: boolean;\n}\n\ninterface Range {\n  startContainer: ChildNode;\n  endContainer: ChildNode;\n  startOffset: number;\n  endOffset: number;\n}\n\nexport default class Highlighter {\n  element: HTMLElement;\n  highlightClass: string;\n  enabled: boolean;\n\n  constructor(props: Props = {}) {\n    const { element = document.body, className = 'highlight', enabled = true } = props;\n\n    this.element = element;\n    this.highlightClass = className;\n    this.enabled = enabled;\n\n    this.setContainerElement(element);\n\n    this.handlePointerUp = this.handlePointerUp.bind(this);\n    this.element.addEventListener('pointerup', this.handlePointerUp);\n  }\n\n  handlePointerUp() {\n    if (this.enabled) {\n      this.highlightSelection();\n    }\n  }\n\n  setContainerElement(element: HTMLElement) {\n    this.element = element;\n  }\n\n  getHighlightedNodes(): HTMLElement[] {\n    if (!this.element) return [];\n\n    return Array.from(this.element.querySelectorAll(`.${this.highlightClass}`));\n  }\n\n  /**\n   * Clears the highlights from the container element\n   *\n   * @memberof Highlighter\n   */\n  clear(): void {\n    if (!this.element) return;\n\n    const highlightedNodes = this.getHighlightedNodes();\n    highlightedNodes.forEach((highlightedNode) => {\n      highlightedNode.replaceWith(...Array.from(highlightedNode.childNodes));\n    });\n  }\n\n  highlightSelection(): { startOffset?: number; endOffset?: number } {\n    const selection = window.getSelection();\n    let results = {};\n\n    // If there's no selection object\n    if (!selection) return results;\n\n    // Container element must be defined\n    if (!this.element) {\n      console.error(new Error('Container element not defined for highlighter.'));\n      return results;\n    } \n    \n    const range = selection.getRangeAt(0);\n    \n    const { startContainer, endContainer, startOffset, endOffset } = range as unknown as Range;\n\n    // Ensure that results are Text nodes\n    if (isTextNode(startContainer) && isTextNode(endContainer)) {\n      const startTextNode = startContainer;\n      const endTextNode = endContainer;\n\n      // If no content's actually been selected\n      if (startTextNode === endTextNode && endOffset === startOffset) return results;\n  \n      if (startTextNode === endTextNode) {\n        // If the selection occurs inside the same text node\n        const newNodes = this.highlightNode(startTextNode.textContent, startOffset, endOffset) as ChildNode[];\n        startTextNode.replaceWith(...newNodes);\n      } else {\n        const textNodes = textNodesUnder(this.element);\n  \n        let startFound = false;\n        textNodes.some((textNode) => {\n          if (!textNode.textContent) return false;\n  \n          // Handle highlighting the starting text node\n          if (textNode === startTextNode) {\n            const newStartNodes = this.highlightNode(textNode.textContent, startOffset, textNode.textContent.length);\n            textNode.replaceWith(...newStartNodes);\n  \n            // Start collecting text nodes in between\n            startFound = true;\n            \n            return false;\n          } else if (textNode === endTextNode) {\n            // Handle highlighting the end text node\n            const newEndNodes = this.highlightNode(textNode.textContent, 0, endOffset);\n            textNode.replaceWith(...newEndNodes);\n  \n            return true; // Stop the loop\n          } else if (startFound) {\n            // Handle highlighting nodes in between start and end\n            const newEndNodes = this.highlightNode(textNode.textContent, 0, textNode.textContent.length);\n            textNode.replaceWith(...newEndNodes);\n          }\n          \n          return false;\n        });\n      }\n      selection.removeAllRanges();\n  \n      return this.getOffsets();\n    }\n\n    return results;\n  }\n\n  highlightRange(startOffset: number, endOffset: number): void {\n    if (!this.element) {\n      console.error(new Error('Container element not defined for highlighter.'))\n    };\n\n    const textNodes = textNodesUnder(this.element);\n    \n    let currentIndex = 0;\n    let startFound = false;\n\n    textNodes.some((textNode) => {\n      if (!textNode.textContent) return false;\n\n      const newCurrentIndex = currentIndex + (textNode.textContent.length || 0);\n      if (startOffset >= currentIndex && startOffset < newCurrentIndex) {\n        const newNodes = this.highlightNode(textNode.textContent, startOffset - currentIndex, textNode.textContent.length);\n        textNode.replaceWith(...newNodes);\n        startFound = true;\n      } else if (endOffset >= currentIndex && endOffset < newCurrentIndex) {\n        const newNodes = this.highlightNode(textNode.textContent, 0, endOffset - currentIndex);\n        textNode.replaceWith(...newNodes);\n        return true;\n      } else if (startFound) {\n        const newNodes = this.highlightNode(textNode.textContent, 0, textNode.textContent.length);\n        textNode.replaceWith(...newNodes);\n      }\n\n      currentIndex = newCurrentIndex;\n      return false;\n    });\n  }\n\n  getOffsets() {\n    if (!this.element) return {};\n\n    const textNodes = textNodesUnder(this.element);\n    const highlightedNodes = this.getHighlightedNodes().reduce((arr: Text[], current) => [...arr,  ...textNodesUnder(current)], []);\n\n    let startOffset = 0;\n    let endOffset = 0;\n\n    let currentIndex = 0;\n    textNodes.some((textNode) => {\n      if (!textNode.textContent) return false;\n\n      if (highlightedNodes.find((node) => node === textNode)) {\n        if (!startOffset) {\n          startOffset = currentIndex;\n        }\n        \n        endOffset = currentIndex + textNode.textContent.length;\n      }\n\n      currentIndex += textNode.textContent.length;\n    });\n\n    return { startOffset, endOffset };\n  }\n\n  highlightNode (text: string | null = '', startOffset: number, endOffset: number): ChildNode[] {\n    if (!text) return [];\n\n    const highlightedText = text.substring(startOffset, endOffset);\n  \n    if (highlightedText.length > 0) {\n      const highlightedSpanNode = document.createElement('SPAN');\n      highlightedSpanNode.classList.add(this.highlightClass);\n    \n      const startTextNode = document.createTextNode(text.substring(0, startOffset));\n      const highlightedTextNode = document.createTextNode(highlightedText);\n      const endTextNode = document.createTextNode(text.substring(endOffset));\n    \n      highlightedSpanNode.appendChild(highlightedTextNode);\n    \n      const newNodes = [];\n      if (startTextNode.textContent) newNodes.push(startTextNode);\n      newNodes.push(highlightedSpanNode);\n      if (endTextNode.textContent) newNodes.push(endTextNode);\n    \n      return newNodes;\n    }\n    \n    return [document.createTextNode(text)];\n  }\n\n  enable() {\n    this.enabled = true;\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n}\n\n/**\n * Gets an array of text nodes under the passed node\n *\n * @param {HTMLElement} node\n * @returns {[HTMLElement]} - array of text nodes\n */\n const textNodesUnder = (node: HTMLElement): Text[] => {\n  let all: Text[] = [];\n\n  // @ts-ignore\n  for (node = node.firstChild; node; node = node.nextSibling) {\n    if (isTextNode(node)) all.push(node);\n    else all = all.concat(textNodesUnder(node));\n  }\n  return all;\n};\n","import App from './Mrkr';\nexport default App;"],"sourceRoot":""}